<!DOCTYPE html>
<html>
<head>
    <title>Dashboard - The Richest</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>🏆 Leaderboard</h1>
        <p>Welcome, {{ current_user.name }} (<a href="/logout">Logout</a>)</p>

        <form action="/create-checkout-session" method="post" style="margin: 20px 0;">
            <input 
                type="number" 
                name="amount" 
                placeholder="Amount (€)" 
                step="0.01" 
                required 
                style="padding: 10px; border-radius: 6px;"
            >
            <button type="submit" class="play-btn">💸 Play</button>
        </form>

        {% if current_user.email == 'andrewpegoraro94@gmail.com' %}
        <form action="/reset" method="post" style="margin-top: 20px;">
            <button type="submit" class="reset-btn">🔁 Reset Leaderboard</button>
        </form>

        <form action="/fake_donation" method="post" style="margin-top: 20px;">
            <input type="text" name="name" placeholder="Fake name" required style="padding: 10px; border-radius: 6px;">
            <input type="number" step="0.01" name="amount" placeholder="Fake amount (€)" required style="padding: 10px; border-radius: 6px;">
            <button type="submit" class="reset-btn">➕ Add Fake Donation</button>
        </form>
        {% endif %}

        <table>
            <tr>
                <th>Rank</th>
                <th>Name</th>
                <th>Total Donated (€)</th>
            </tr>
            {% for user in users %}
            <tr class="{% if loop.index == 1 %}gold-row{% elif loop.index == 2 %}silver-row{% elif loop.index == 3 %}bronze-row{% endif %}">
                <td class="rank-cell">
                    {% if loop.index == 1 %}
                        <span class="medal gold">🥇</span>
                    {% elif loop.index == 2 %}
                        <span class="medal silver">🥈</span>
                    {% elif loop.index == 3 %}
                        <span class="medal bronze">🥉</span>
                    {% else %}
                        <span class="rank-number">{{ loop.index }}</span>
                    {% endif %}
                </td>
                <td>{{ user.name }}</td>
                <td>{{ '%.2f' % user.total_donated }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
</body>
</html>
